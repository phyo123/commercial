[supervisord]
nodaemon=true
user=root

[program:artisan-setup]
directory=/var/www/COMMERCIAL
command=sh -c "php artisan config:clear && php artisan cache:clear && php artisan config:cache && php artisan route:cache && php artisan storage:link && php artisan basset:clear && php artisan basset:install && php artisan basset:build"
stdout_logfile=/var/www/COMMERCIAL/storage/logs/artisan-setup.log
stderr_logfile=/var/www/COMMERCIAL/storage/logs/artisan-setup-error.log
autorestart=false
priority=1

[program:migrate]
command=/usr/local/bin/php artisan migrate --force
directory=/var/www/COMMERCIAL
autostart=true
autorestart=false
priority=2

[program:php-fpm]
command=/usr/local/sbin/php-fpm -F
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
priority=3

[program:nginx]
command=sh -c 'while ! nc -z 127.0.0.1 10000 2>/dev/null; do sleep 1; done; nginx -g "daemon off;"'
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
priority=4

[program:check-status]
command=supervisorctl status
autostart=true
autorestart=false
priority=99
